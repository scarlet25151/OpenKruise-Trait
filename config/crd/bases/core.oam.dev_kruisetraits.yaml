
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.2.5
  creationTimestamp: null
  name: kruisetraits.core.oam.dev
spec:
  group: core.oam.dev
  names:
    categories:
      - crossplane
      - oam
    kind: KruiseTrait
    listKind: KruiseTrait
    plural: kruisetraits
    singular: kruisetrait
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: IngressTrait is the Schema for the ingresstraits API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
                of an object. Servers should convert recognized schemas to the latest
                internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
                object represents. Servers may infer this from the endpoint the client
                submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: TraitSpec defines the desired state of KruiseTrait
          scaleStrategy:
            description: ScaleStrategy indicates the ScaleStrategy that will be
              employed to create and delete Pods in the CloneSet.
              properties:
                podsToDelete:
                  description: PodsToDelete is the names of Pod should be deleted.
                    Note that this list will be truncated for non-existing pod names.
                  items:
                    type: string
                  type: array
              type: object
          updateStrategy:
            description: UpdateStrategy indicates the UpdateStrategy that will be
              employed to update Pods in the CloneSet when a revision is made to
              Template.
            properties:
              inPlaceUpdateStrategy:
                description: InPlaceUpdateStrategy contains strategies for in-place
                  update.
                properties:
                  gracePeriodSeconds:
                    description: GracePeriodSeconds is the timespan between set
                      Pod status to not-ready and update images in Pod spec when
                      in-place update a Pod.
                    format: int32
                    type: integer
                type: object
              maxSurge:
                anyOf:
                  - type: integer
                  - type: string
                description: 'The maximum number of pods that can be scheduled above
                              the desired replicas during the update. Value can be an absolute
                              number (ex: 5) or a percentage of desired pods (ex: 10%). Absolute
                              number is calculated from percentage by rounding up. Defaults
                              to 0.'
                x-kubernetes-int-or-string: true
              maxUnavailable:
                anyOf:
                  - type: integer
                  - type: string
                description: 'The maximum number of pods that can be unavailable
                              during the update. Value can be an absolute number (ex: 5) or
                              a percentage of desired pods (ex: 10%). Absolute number is calculated
                              from percentage by rounding up by default. When maxSurge > 0,
                              absolute number is calculated from percentage by rounding down.
                              Defaults to 20%.'
                x-kubernetes-int-or-string: true
              partition:
                description: Partition is the desired number of pods in old revisions.
                  It means when partition is set during pods updating, (replicas
                  - partition) number of pods will be updated. Default value is
                  0.
                format: int32
                type: integer
              paused:
                description: Paused indicates that the CloneSet is paused. Default
                  value is false
                type: boolean
              priorityStrategy:
                description: Priorities are the rules for calculating the priority
                  of updating pods. Each pod to be updated, will pass through these
                  terms and get a sum of weights.
                properties:
                  orderPriority:
                    description: 'Order priority terms, pods will be sorted by the
                                  value of orderedKey. For example: ``` orderPriority: - orderedKey:
                                  key1 - orderedKey: key2 ``` First, all pods which have key1
                                  in labels will be sorted by the value of key1. Then, the left
                                  pods which have no key1 but have key2 in labels will be sorted
                                  by the value of key2 and put behind those pods have key1.'
                    items:
                      description: UpdatePriorityOrder defines order priority.
                      properties:
                        orderedKey:
                          description: Calculate priority by value of this key.
                            Values of this key, will be sorted by GetInt(val). GetInt
                            method will find the last int in value, such as getting
                            5 in value '5', getting 10 in value 'sts-10'.
                          type: string
                      required:
                        - orderedKey
                      type: object
                    type: array
                  weightPriority:
                    description: Weight priority terms, pods will be sorted by the
                      sum of all terms weight.
                    items:
                      description: UpdatePriorityWeightTerm defines weight priority.
                      properties:
                        matchSelector:
                          description: MatchSelector is used to select by pod's
                            labels.
                          properties:
                            matchExpressions:
                              description: matchExpressions is a list of label selector
                                requirements. The requirements are ANDed.
                              items:
                                description: A label selector requirement is a selector
                                  that contains values, a key, and an operator that
                                  relates the key and values.
                                properties:
                                  key:
                                    description: key is the label key that the selector
                                      applies to.
                                    type: string
                                  operator:
                                    description: operator represents a key's relationship
                                      to a set of values. Valid operators are In,
                                      NotIn, Exists and DoesNotExist.
                                    type: string
                                  values:
                                    description: values is an array of string values.
                                      If the operator is In or NotIn, the values
                                      array must be non-empty. If the operator is
                                      Exists or DoesNotExist, the values array must
                                      be empty. This array is replaced during a
                                      strategic merge patch.
                                    items:
                                      type: string
                                    type: array
                                required:
                                  - key
                                  - operator
                                type: object
                              type: array
                            matchLabels:
                              additionalProperties:
                                type: string
                              description: matchLabels is a map of {key,value} pairs.
                                A single {key,value} in the matchLabels map is equivalent
                                to an element of matchExpressions, whose key field
                                is "key", the operator is "In", and the values array
                                contains only "value". The requirements are ANDed.
                              type: object
                          type: object
                        weight:
                          description: Weight associated with matching the corresponding
                            matchExpressions, in the range 1-100.
                          format: int32
                          type: integer
                      required:
                        - matchSelector
                        - weight
                      type: object
                    type: array
                type: object
              scatterStrategy:
                description: ScatterStrategy defines the scatter rules to make pods
                  been scattered when update. This will avoid pods with the same
                  key-value to be updated in one batch. - Note that pods will be
                  scattered after priority sort. So, although priority strategy
                  and scatter strategy can be applied together, we suggest to use
                  either one of them. - If scatterStrategy is used, we suggest to
                  just use one term. Otherwise, the update order can be hard to
                  understand.
                items:
                  properties:
                    key:
                      type: string
                    value:
                      type: string
                  required:
                    - key
                    - value
                  type: object
                type: array
              type:
                description: Type indicates the type of the CloneSetUpdateStrategy.
                  Default is ReCreate.
                type: string
            type: object